<!DOCTYPE html>
<html>
<head>
  <title>Cart</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<nav class="bg-white shadow">
  <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">Cartigo</h1>
    <a href="main.html" class="text-blue-600">Back to Shop</a>
  </div>
</nav>

<div class="max-w-5xl mx-auto px-4 mt-8">

  <h2 class="text-2xl font-semibold mb-6">Your Cart</h2>

  <div id="cartItems" class="space-y-4"></div>

  <div class="bg-white p-6 rounded-xl shadow mt-6">
    <div class="flex justify-between text-lg">
      <span>Subtotal</span>
      <span id="subtotal">₹0</span>
    </div>

    <div class="flex justify-between text-xl font-bold mt-2">
      <span>Total</span>
      <span id="total">₹0</span>
    </div>

    <a href="checkout.html"
      class="block text-center bg-green-600 text-white py-3 rounded mt-4 hover:bg-green-700">
      Proceed to Checkout
    </a>
  </div>

</div>

<script>

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function displayCart(){
  let container = document.getElementById("cartItems");
  container.innerHTML = "";
  let total = 0;

  if(cart.length === 0){
    container.innerHTML = "<p>Your cart is empty</p>";
  }

  cart.forEach((item,main)=>{
    total += item.price * item.quantity;

    container.innerHTML += `
    <div class="bg-white p-4 rounded-xl shadow flex justify-between items-center">

      <div class="flex items-center space-x-4">
        <img src="${item.image}" class="w-20 h-20 rounded object-cover">
        <div>
          <h3 class="font-semibold">${item.name}</h3>
          <p class="text-gray-500">₹${item.price}</p>
        </div>
      </div>

      <div class="flex items-center space-x-3">
        <button onclick="changeQty(${main},-1)"
          class="bg-gray-200 px-3 py-1 rounded">-</button>

        <span>${item.quantity}</span>

        <button onclick="changeQty(${main},1)"
          class="bg-gray-200 px-3 py-1 rounded">+</button>

        <button onclick="removeItem(${main})"
          class="text-red-600 ml-4">Remove</button>
      </div>

    </div>`;
  });

  document.getElementById("subtotal").innerText = "₹" + total;
  document.getElementById("total").innerText = "₹" + total;
}

displayCart();

function changeQty(main,change){
  cart[main].quantity += change;
  if(cart[main].quantity <= 0){
    cart.splice(main,1);
  }
  localStorage.setItem("cart",JSON.stringify(cart));
  displayCart();
}

function removeItem(main){
  cart.splice(main,1);
  localStorage.setItem("cart",JSON.stringify(cart));
  displayCart();
}

</script>

</body>
</html>
